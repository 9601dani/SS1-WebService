<app-navbar></app-navbar>

<div class="container">
  <h1 class="title">Reporte de Cierre</h1>

  <div class="filter-section">
    <label for="dateFilter">Fecha límite:</label>
    <input type="date" id="dateFilter" [(ngModel)]="selectedDate">
    <button class="filter-button" (click)="filterByDate()">Filtrar</button>
    <button class="clear-button" (click)="clearFilter()">Limpiar</button>
  </div>

  <div *ngIf="filteredCards.length > 0" class="export-buttons">
    <button class="pdf-button" (click)="exportToPDF()">Exportar a PDF</button>
    <button class="csv-button" (click)="exportToCSV()">Exportar a CSV</button>
    <br><br>
  </div>

  <div class="card-container" *ngFor="let card of filteredCards">
    <br>
    <div class="card-blocked">
      <div class="field">
        <label>Número de Tarjeta:</label>
        <span>{{ card.credit_card_number }}</span>
      </div>
      <div class="field">
        <label>Estado:</label>
        <span>{{ formatState(card.state) }}</span>
      </div>
      <div class="field">
        <label>Motivo de Cierre:</label>
        <span>{{ card.close_reason }}</span>
      </div>
      <div class="field">
        <label>Fecha de Bloqueo:</label>
        <span>{{ formatDate(card.credit_card_created_date) }}</span>
      </div>
    </div>
  </div>
</div>

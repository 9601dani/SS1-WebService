<app-navbar></app-navbar>

<div class="container">
  <div class="title">Reducir Saldo</div>

  <div class="box">
    <div class="columns">
      <div class="column">
        <div class="field">
          <label class="label">Número de tarjeta</label>
          <div class="control">
            <input 
              type="text" 
              class="input" 
              placeholder="Ingrese el número de tarjeta" 
              [(ngModel)]="cardNumber"
              (keydown)="onKeyDown($event)"
            >
          </div>
        </div>

        <div class="card-details" *ngIf="creditCard">
          <h2>Detalles de la Tarjeta</h2>
          <p><strong>Email:</strong> {{ creditCard.email }}</p>
          <p><strong>Fecha de Expiración:</strong> {{ creditCard.expiration_date }}</p>
          <p><strong>Tipo de Cuenta:</strong> {{ creditCard.account_type | uppercase }}</p>
          <p><strong>Tipo de Tarjeta:</strong> {{ creditCard.credit_card_type }}</p>
          <p>
            <strong>Estado:</strong>
            {{ creditCard.state === 'active' ? 'Activo' : creditCard.state === 'disabled' ? 'Deshabilitado' : 'Bloqueado' }}
          </p>  
          <p>
            <strong>Saldo actual:</strong>
            {{ creditCard.account_type === 'normal' ? 'Q' : '$' }}{{ creditCard.current_balance }}
          </p>
        </div>
      </div>

      <div class="column">
        <div class="field">
          <label class="label">Pago a realizar (en Quetzales)</label>
          <div class="control">
            <input 
              type="number" 
              class="input" 
              placeholder="Ingrese el monto a pagar" 
              [(ngModel)]="paymentAmount"
            >
          </div>
        </div>

        <div class="field">
          <div class="control">
            <button class="button is-primary" (click)="reduceBalance()">Reducir Saldo</button>
          </div>
        </div>

        <div class="help" *ngIf="errorMessage">{{ errorMessage }}</div>
      </div>
    </div>
  </div>
</div>
